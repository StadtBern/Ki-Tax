{"remainingRequest":"/home/imanol/projects/ebegu/ebegu-web/node_modules/thread-loader/dist/cjs.js??ref--0-1!/home/imanol/projects/ebegu/ebegu-web/node_modules/ts-loader/index.js??ref--0-2!/home/imanol/projects/ebegu/ebegu-web/src/gesuch/gesuch.route.ts","cacheIdentifier":"cache-loader:1.1.0 test","dependencies":[{"path":"/home/imanol/projects/ebegu/ebegu-web/src/gesuch/gesuch.route.ts","mtime":1518535855228},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/cache-loader/dist/cjs.js","mtime":1507514019000},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/thread-loader/dist/cjs.js","mtime":1507523420000},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/ts-loader/index.js","mtime":1508488471000}],"contextDependencies":[],"result":["/*\n * Ki-Tax: System for the management of external childcare subsidies\n * Copyright (C) 2017 City of Bern Switzerland\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\ndefine([\"require\", \"exports\", \"./gesuch\", \"../utils/TSRoleUtil\"], function (require, exports, gesuch_1, TSRoleUtil_1) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    var gesuchTpl = require('./gesuch.html');\n    gesuchRun.$inject = ['RouterHelper'];\n    /* @ngInject */\n    function gesuchRun(routerHelper) {\n        routerHelper.configureStates(getStates(), '/start');\n    }\n    exports.gesuchRun = gesuchRun;\n    //array mit allen States\n    function getStates() {\n        return [\n            new EbeguGesuchState(),\n            new EbeguFamiliensituationState(),\n            new EbeguStammdatenState(),\n            new EbeguUmzugState(),\n            new EbeguKinderListState(),\n            new EbeguFinanzielleSituationStartState(),\n            new EbeguFinanzielleSituationState(),\n            new EbeguFinanzielleSituationResultateState(),\n            new EbeguKindState(),\n            new EbeguErwerbspensenListState(),\n            new EbeguErwerbspensumState(),\n            new EbeguBetreuungListState(),\n            new EbeguBetreuungState(),\n            new EbeguAbwesenheitState(),\n            new EbeguNewFallState(),\n            new EbeguMutationState(),\n            new EbeguErneuerungsgesuchState(),\n            new EbeguVerfuegenListState(),\n            new EbeguVerfuegenState(),\n            new EbeguEinkommensverschlechterungInfoState(),\n            new EbeguEinkommensverschlechterungSteuernState(),\n            new EbeguEinkommensverschlechterungState(),\n            new EbeguEinkommensverschlechterungResultateState(),\n            new EbeguDokumenteState(),\n            new EbeguFreigabeState(),\n            new EbeguBetreuungMitteilungState()\n        ];\n    }\n    //STATES\n    var EbeguGesuchState = /** @class */ (function () {\n        function EbeguGesuchState() {\n            this.name = 'gesuch';\n            this.template = gesuchTpl;\n            this.url = '/gesuch';\n            this.abstract = true;\n            this.controller = gesuch_1.GesuchRouteController;\n            this.controllerAs = 'vm';\n        }\n        return EbeguGesuchState;\n    }());\n    exports.EbeguGesuchState = EbeguGesuchState;\n    var EbeguNewFallState = /** @class */ (function () {\n        function EbeguNewFallState() {\n            this.name = 'gesuch.fallcreation';\n            this.url = '/fall/:createNew/:eingangsart/:gesuchsperiodeId/:gesuchId/:fallId';\n            this.views = {\n                'gesuchViewPort': {\n                    template: '<fall-creation-view>'\n                },\n                'kommentarViewPort': {\n                    template: '<kommentar-view>'\n                }\n            };\n            this.resolve = {\n                gesuch: reloadGesuchModelManager\n            };\n        }\n        return EbeguNewFallState;\n    }());\n    exports.EbeguNewFallState = EbeguNewFallState;\n    var EbeguMutationState = /** @class */ (function () {\n        function EbeguMutationState() {\n            this.name = 'gesuch.mutation';\n            this.url = '/mutation/:createMutation/:eingangsart/:gesuchsperiodeId/:gesuchId/:fallId';\n            this.views = {\n                'gesuchViewPort': {\n                    template: '<fall-creation-view>'\n                },\n                'kommentarViewPort': {\n                    template: '<kommentar-view>'\n                }\n            };\n            this.resolve = {\n                gesuch: createEmptyMutation\n            };\n        }\n        return EbeguMutationState;\n    }());\n    exports.EbeguMutationState = EbeguMutationState;\n    var EbeguErneuerungsgesuchState = /** @class */ (function () {\n        function EbeguErneuerungsgesuchState() {\n            this.name = 'gesuch.erneuerung';\n            this.url = '/erneuerung/:createErneuerung/:eingangsart/:gesuchsperiodeId/:gesuchId/:fallId';\n            this.views = {\n                'gesuchViewPort': {\n                    template: '<fall-creation-view>'\n                },\n                'kommentarViewPort': {\n                    template: '<kommentar-view>'\n                }\n            };\n            this.resolve = {\n                gesuch: createEmptyErneuerungsgesuch\n            };\n        }\n        return EbeguErneuerungsgesuchState;\n    }());\n    exports.EbeguErneuerungsgesuchState = EbeguErneuerungsgesuchState;\n    var EbeguFamiliensituationState = /** @class */ (function () {\n        function EbeguFamiliensituationState() {\n            this.name = 'gesuch.familiensituation';\n            this.url = '/familiensituation/:gesuchId';\n            this.views = {\n                'gesuchViewPort': {\n                    template: '<familiensituation-view>'\n                },\n                'kommentarViewPort': {\n                    template: '<kommentar-view>'\n                }\n            };\n            this.resolve = {\n                gesuch: getGesuchModelManager\n            };\n        }\n        return EbeguFamiliensituationState;\n    }());\n    exports.EbeguFamiliensituationState = EbeguFamiliensituationState;\n    var EbeguStammdatenState = /** @class */ (function () {\n        function EbeguStammdatenState() {\n            this.name = 'gesuch.stammdaten';\n            this.url = '/stammdaten/:gesuchId/:gesuchstellerNumber';\n            this.views = {\n                'gesuchViewPort': {\n                    template: '<stammdaten-view>'\n                },\n                'kommentarViewPort': {\n                    template: '<kommentar-view>'\n                }\n            };\n            this.resolve = {\n                gesuch: getGesuchModelManager\n            };\n        }\n        return EbeguStammdatenState;\n    }());\n    exports.EbeguStammdatenState = EbeguStammdatenState;\n    var EbeguUmzugState = /** @class */ (function () {\n        function EbeguUmzugState() {\n            this.name = 'gesuch.umzug';\n            this.url = '/umzug/:gesuchId';\n            this.views = {\n                'gesuchViewPort': {\n                    template: '<umzug-view>'\n                },\n                'kommentarViewPort': {\n                    template: '<kommentar-view>'\n                }\n            };\n            this.resolve = {\n                gesuch: getGesuchModelManager\n            };\n        }\n        return EbeguUmzugState;\n    }());\n    exports.EbeguUmzugState = EbeguUmzugState;\n    var EbeguKinderListState = /** @class */ (function () {\n        function EbeguKinderListState() {\n            this.name = 'gesuch.kinder';\n            this.url = '/kinder/:gesuchId';\n            this.views = {\n                'gesuchViewPort': {\n                    template: '<kinder-list-view kinder-dubletten=\"$resolve.kinderDubletten\">'\n                },\n                'kommentarViewPort': {\n                    template: '<kommentar-view>'\n                }\n            };\n            this.resolve = {\n                gesuch: getGesuchModelManager,\n                kinderDubletten: getKinderDubletten\n            };\n        }\n        return EbeguKinderListState;\n    }());\n    exports.EbeguKinderListState = EbeguKinderListState;\n    var EbeguKindState = /** @class */ (function () {\n        function EbeguKindState() {\n            this.name = 'gesuch.kind';\n            this.url = '/kinder/kind/:gesuchId/:kindNumber';\n            this.views = {\n                'gesuchViewPort': {\n                    template: '<kind-view>'\n                },\n                'kommentarViewPort': {\n                    template: '<kommentar-view>'\n                }\n            };\n            this.resolve = {\n                gesuch: getGesuchModelManager\n            };\n        }\n        return EbeguKindState;\n    }());\n    exports.EbeguKindState = EbeguKindState;\n    var EbeguBetreuungListState = /** @class */ (function () {\n        function EbeguBetreuungListState() {\n            this.name = 'gesuch.betreuungen';\n            this.url = '/betreuungen/:gesuchId';\n            this.views = {\n                'gesuchViewPort': {\n                    template: '<betreuung-list-view>'\n                },\n                'kommentarViewPort': {\n                    template: '<kommentar-view>'\n                }\n            };\n            this.resolve = {\n                gesuch: getGesuchModelManager\n            };\n        }\n        return EbeguBetreuungListState;\n    }());\n    exports.EbeguBetreuungListState = EbeguBetreuungListState;\n    var EbeguBetreuungState = /** @class */ (function () {\n        function EbeguBetreuungState() {\n            this.name = 'gesuch.betreuung';\n            this.url = '/betreuungen/betreuung/:gesuchId/:kindNumber/:betreuungNumber';\n            this.views = {\n                'gesuchViewPort': {\n                    template: '<betreuung-view>'\n                },\n                'kommentarViewPort': {\n                    template: '<kommentar-view>'\n                }\n            };\n            this.resolve = {\n                gesuch: getGesuchModelManager\n            };\n        }\n        return EbeguBetreuungState;\n    }());\n    exports.EbeguBetreuungState = EbeguBetreuungState;\n    var EbeguAbwesenheitState = /** @class */ (function () {\n        function EbeguAbwesenheitState() {\n            this.name = 'gesuch.abwesenheit';\n            this.url = '/abwesenheit/:gesuchId';\n            this.views = {\n                'gesuchViewPort': {\n                    template: '<abwesenheit-view>'\n                },\n                'kommentarViewPort': {\n                    template: '<kommentar-view>'\n                }\n            };\n            this.resolve = {\n                gesuch: getGesuchModelManager\n            };\n        }\n        return EbeguAbwesenheitState;\n    }());\n    exports.EbeguAbwesenheitState = EbeguAbwesenheitState;\n    var EbeguErwerbspensenListState = /** @class */ (function () {\n        function EbeguErwerbspensenListState() {\n            this.name = 'gesuch.erwerbsPensen';\n            this.url = '/erwerbspensen/:gesuchId';\n            this.views = {\n                'gesuchViewPort': {\n                    template: '<erwerbspensum-list-view>'\n                },\n                'kommentarViewPort': {\n                    template: '<kommentar-view>'\n                }\n            };\n            this.resolve = {\n                gesuch: getGesuchModelManager\n            };\n        }\n        return EbeguErwerbspensenListState;\n    }());\n    exports.EbeguErwerbspensenListState = EbeguErwerbspensenListState;\n    var EbeguErwerbspensumState = /** @class */ (function () {\n        function EbeguErwerbspensumState() {\n            this.name = 'gesuch.erwerbsPensum';\n            this.url = '/erwerbspensen/erwerbspensum/:gesuchId/:gesuchstellerNumber/:erwerbspensumNum';\n            this.views = {\n                'gesuchViewPort': {\n                    template: '<erwerbspensum-view>'\n                },\n                'kommentarViewPort': {\n                    template: '<kommentar-view>'\n                }\n            };\n            this.resolve = {\n                gesuch: getGesuchModelManager\n            };\n        }\n        return EbeguErwerbspensumState;\n    }());\n    exports.EbeguErwerbspensumState = EbeguErwerbspensumState;\n    var EbeguFinanzielleSituationState = /** @class */ (function () {\n        function EbeguFinanzielleSituationState() {\n            this.name = 'gesuch.finanzielleSituation';\n            this.url = '/finanzielleSituation/:gesuchId/:gesuchstellerNumber';\n            this.views = {\n                'gesuchViewPort': {\n                    template: '<finanzielle-situation-view>'\n                },\n                'kommentarViewPort': {\n                    template: '<kommentar-view>'\n                }\n            };\n            this.resolve = {\n                gesuch: getGesuchModelManager\n            };\n        }\n        return EbeguFinanzielleSituationState;\n    }());\n    exports.EbeguFinanzielleSituationState = EbeguFinanzielleSituationState;\n    var EbeguFinanzielleSituationStartState = /** @class */ (function () {\n        function EbeguFinanzielleSituationStartState() {\n            this.name = 'gesuch.finanzielleSituationStart';\n            this.url = '/finanzielleSituationStart/:gesuchId';\n            this.views = {\n                'gesuchViewPort': {\n                    template: '<finanzielle-situation-start-view>'\n                },\n                'kommentarViewPort': {\n                    template: '<kommentar-view>'\n                }\n            };\n            this.resolve = {\n                gesuch: getGesuchModelManager\n            };\n        }\n        return EbeguFinanzielleSituationStartState;\n    }());\n    exports.EbeguFinanzielleSituationStartState = EbeguFinanzielleSituationStartState;\n    var EbeguFinanzielleSituationResultateState = /** @class */ (function () {\n        function EbeguFinanzielleSituationResultateState() {\n            this.name = 'gesuch.finanzielleSituationResultate';\n            this.url = '/finanzielleSituationResultate/:gesuchId';\n            this.views = {\n                'gesuchViewPort': {\n                    template: '<finanzielle-situation-resultate-view>'\n                },\n                'kommentarViewPort': {\n                    template: '<kommentar-view>'\n                }\n            };\n            this.resolve = {\n                gesuch: getGesuchModelManager\n            };\n        }\n        return EbeguFinanzielleSituationResultateState;\n    }());\n    exports.EbeguFinanzielleSituationResultateState = EbeguFinanzielleSituationResultateState;\n    var EbeguVerfuegenListState = /** @class */ (function () {\n        function EbeguVerfuegenListState() {\n            this.name = 'gesuch.verfuegen';\n            this.url = '/verfuegen/:gesuchId';\n            this.views = {\n                'gesuchViewPort': {\n                    template: '<verfuegen-list-view mahnung-list=\"$resolve.mahnungList\">'\n                },\n                'kommentarViewPort': {\n                    template: '<kommentar-view>'\n                }\n            };\n            this.resolve = {\n                gesuch: getGesuchModelManager,\n                mahnungList: getMahnungen\n            };\n        }\n        return EbeguVerfuegenListState;\n    }());\n    exports.EbeguVerfuegenListState = EbeguVerfuegenListState;\n    var EbeguVerfuegenState = /** @class */ (function () {\n        function EbeguVerfuegenState() {\n            this.name = 'gesuch.verfuegenView';\n            this.url = '/verfuegenView/:gesuchId/:betreuungNumber/:kindNumber';\n            this.views = {\n                'gesuchViewPort': {\n                    template: '<verfuegen-view>'\n                },\n                'kommentarViewPort': {\n                    template: '<kommentar-view>'\n                }\n            };\n            this.resolve = {\n                gesuch: getGesuchModelManager\n            };\n        }\n        return EbeguVerfuegenState;\n    }());\n    exports.EbeguVerfuegenState = EbeguVerfuegenState;\n    var EbeguEinkommensverschlechterungInfoState = /** @class */ (function () {\n        function EbeguEinkommensverschlechterungInfoState() {\n            this.name = 'gesuch.einkommensverschlechterungInfo';\n            this.url = '/einkommensverschlechterungInfo/:gesuchId';\n            this.views = {\n                'gesuchViewPort': {\n                    template: '<einkommensverschlechterung-info-view>'\n                },\n                'kommentarViewPort': {\n                    template: '<kommentar-view>'\n                }\n            };\n            this.resolve = {\n                gesuch: getGesuchModelManager\n            };\n        }\n        return EbeguEinkommensverschlechterungInfoState;\n    }());\n    exports.EbeguEinkommensverschlechterungInfoState = EbeguEinkommensverschlechterungInfoState;\n    var EbeguEinkommensverschlechterungSteuernState = /** @class */ (function () {\n        function EbeguEinkommensverschlechterungSteuernState() {\n            this.name = 'gesuch.einkommensverschlechterungSteuern';\n            this.url = '/einkommensverschlechterungSteuern/:gesuchId';\n            this.views = {\n                'gesuchViewPort': {\n                    template: '<einkommensverschlechterung-steuern-view>'\n                },\n                'kommentarViewPort': {\n                    template: '<kommentar-view>'\n                }\n            };\n            this.resolve = {\n                gesuch: getGesuchModelManager\n            };\n        }\n        return EbeguEinkommensverschlechterungSteuernState;\n    }());\n    exports.EbeguEinkommensverschlechterungSteuernState = EbeguEinkommensverschlechterungSteuernState;\n    var EbeguEinkommensverschlechterungState = /** @class */ (function () {\n        function EbeguEinkommensverschlechterungState() {\n            this.name = 'gesuch.einkommensverschlechterung';\n            this.url = '/einkommensverschlechterung/:gesuchId/:gesuchstellerNumber/:basisjahrPlus';\n            this.views = {\n                'gesuchViewPort': {\n                    template: '<einkommensverschlechterung-view>'\n                },\n                'kommentarViewPort': {\n                    template: '<kommentar-view>'\n                }\n            };\n            this.resolve = {\n                gesuch: getGesuchModelManager\n            };\n        }\n        return EbeguEinkommensverschlechterungState;\n    }());\n    exports.EbeguEinkommensverschlechterungState = EbeguEinkommensverschlechterungState;\n    var EbeguEinkommensverschlechterungResultateState = /** @class */ (function () {\n        function EbeguEinkommensverschlechterungResultateState() {\n            this.name = 'gesuch.einkommensverschlechterungResultate';\n            this.url = '/einkommensverschlechterungResultate/:gesuchId/:basisjahrPlus';\n            this.views = {\n                'gesuchViewPort': {\n                    template: '<einkommensverschlechterung-resultate-view>'\n                },\n                'kommentarViewPort': {\n                    template: '<kommentar-view>'\n                }\n            };\n            this.resolve = {\n                gesuch: getGesuchModelManager\n            };\n        }\n        return EbeguEinkommensverschlechterungResultateState;\n    }());\n    exports.EbeguEinkommensverschlechterungResultateState = EbeguEinkommensverschlechterungResultateState;\n    var EbeguDokumenteState = /** @class */ (function () {\n        function EbeguDokumenteState() {\n            this.name = 'gesuch.dokumente';\n            this.url = '/dokumente/:gesuchId/:gesuchstellerNumber';\n            this.views = {\n                'gesuchViewPort': {\n                    template: '<dokumente-view>'\n                },\n                'kommentarViewPort': {\n                    template: '<kommentar-view>'\n                }\n            };\n            this.resolve = {\n                gesuch: getGesuchModelManager\n            };\n        }\n        return EbeguDokumenteState;\n    }());\n    exports.EbeguDokumenteState = EbeguDokumenteState;\n    var EbeguFreigabeState = /** @class */ (function () {\n        function EbeguFreigabeState() {\n            this.name = 'gesuch.freigabe';\n            this.url = '/freigabe/:gesuchId';\n            this.views = {\n                'gesuchViewPort': {\n                    template: '<freigabe-view>'\n                },\n                'kommentarViewPort': {\n                    template: '<kommentar-view>'\n                }\n            };\n            this.resolve = {\n                gesuch: getGesuchModelManager\n            };\n        }\n        return EbeguFreigabeState;\n    }());\n    exports.EbeguFreigabeState = EbeguFreigabeState;\n    var EbeguBetreuungMitteilungState = /** @class */ (function () {\n        function EbeguBetreuungMitteilungState() {\n            this.name = 'gesuch.mitteilung';\n            this.url = '/mitteilung/:fallId/:gesuchId/:betreuungId/:mitteilungId';\n            this.views = {\n                'gesuchViewPort': {\n                    template: '<betreuung-mitteilung-view>'\n                },\n                'kommentarViewPort': {\n                    template: '<kommentar-view>'\n                }\n            };\n            this.resolve = {\n                gesuch: getGesuchModelManager\n            };\n        }\n        return EbeguBetreuungMitteilungState;\n    }());\n    exports.EbeguBetreuungMitteilungState = EbeguBetreuungMitteilungState;\n    //PARAMS\n    var IGesuchStateParams = /** @class */ (function () {\n        function IGesuchStateParams() {\n        }\n        return IGesuchStateParams;\n    }());\n    exports.IGesuchStateParams = IGesuchStateParams;\n    var IStammdatenStateParams = /** @class */ (function () {\n        function IStammdatenStateParams() {\n        }\n        return IStammdatenStateParams;\n    }());\n    exports.IStammdatenStateParams = IStammdatenStateParams;\n    var IKindStateParams = /** @class */ (function () {\n        function IKindStateParams() {\n        }\n        return IKindStateParams;\n    }());\n    exports.IKindStateParams = IKindStateParams;\n    var IBetreuungStateParams = /** @class */ (function () {\n        function IBetreuungStateParams() {\n        }\n        return IBetreuungStateParams;\n    }());\n    exports.IBetreuungStateParams = IBetreuungStateParams;\n    var INewFallStateParams = /** @class */ (function () {\n        function INewFallStateParams() {\n        }\n        return INewFallStateParams;\n    }());\n    exports.INewFallStateParams = INewFallStateParams;\n    var IErwerbspensumStateParams = /** @class */ (function () {\n        function IErwerbspensumStateParams() {\n        }\n        return IErwerbspensumStateParams;\n    }());\n    exports.IErwerbspensumStateParams = IErwerbspensumStateParams;\n    var IEinkommensverschlechterungStateParams = /** @class */ (function () {\n        function IEinkommensverschlechterungStateParams() {\n        }\n        return IEinkommensverschlechterungStateParams;\n    }());\n    exports.IEinkommensverschlechterungStateParams = IEinkommensverschlechterungStateParams;\n    var IEinkommensverschlechterungResultateStateParams = /** @class */ (function () {\n        function IEinkommensverschlechterungResultateStateParams() {\n        }\n        return IEinkommensverschlechterungResultateStateParams;\n    }());\n    exports.IEinkommensverschlechterungResultateStateParams = IEinkommensverschlechterungResultateStateParams;\n    // FIXME dieses $inject wird ignoriert, d.h, der Parameter der Funktion muss exact dem Namen des Services entsprechen (Grossbuchstaben am Anfang). Warum?\n    getMahnungen.$inject = ['MahnungRS', '$stateParams', '$q', '$log'];\n    /* @ngInject */\n    function getMahnungen(MahnungRS, $stateParams, $q, $log) {\n        // return [];\n        if ($stateParams) {\n            var gesuchIdParam = $stateParams.gesuchId;\n            if (gesuchIdParam) {\n                return MahnungRS.findMahnungen(gesuchIdParam);\n            }\n        }\n        $log.warn('keine stateParams oder keine gesuchId, gebe undefined zurueck');\n        var deferred = $q.defer();\n        deferred.resolve(undefined);\n        return deferred.promise;\n    }\n    exports.getMahnungen = getMahnungen;\n    getGesuchModelManager.$inject = ['GesuchModelManager', 'BerechnungsManager', 'WizardStepManager', '$stateParams', '$q', '$log'];\n    /* @ngInject */\n    function getGesuchModelManager(gesuchModelManager, berechnungsManager, wizardStepManager, $stateParams, $q, $log) {\n        if ($stateParams) {\n            var gesuchIdParam = $stateParams.gesuchId;\n            if (gesuchIdParam) {\n                if (!gesuchModelManager.getGesuch() || gesuchModelManager.getGesuch() && gesuchModelManager.getGesuch().id !== gesuchIdParam\n                    || gesuchModelManager.getGesuch().emptyCopy) {\n                    // Wenn die antrags id im GescuchModelManager nicht mit der GesuchId ueberreinstimmt wird das gesuch neu geladen\n                    // Ebenfalls soll das Gesuch immer neu geladen werden, wenn es sich beim Gesuch im Gesuchmodelmanager um eine leere Mutation handelt\n                    // oder um ein leeres Erneuerungsgesuch\n                    berechnungsManager.clear();\n                    return gesuchModelManager.openGesuch(gesuchIdParam);\n                }\n                else {\n                    var deferred_1 = $q.defer();\n                    deferred_1.resolve(gesuchModelManager.getGesuch());\n                    return deferred_1.promise;\n                }\n            }\n        }\n        $log.warn('keine stateParams oder keine gesuchId, gebe undefined zurueck');\n        var deferred = $q.defer();\n        deferred.resolve(undefined);\n        return deferred.promise;\n    }\n    exports.getGesuchModelManager = getGesuchModelManager;\n    reloadGesuchModelManager.$inject = ['GesuchModelManager', 'BerechnungsManager', 'WizardStepManager', '$stateParams', '$q', '$log'];\n    /* @ngInject */\n    function reloadGesuchModelManager(gesuchModelManager, berechnungsManager, wizardStepManager, $stateParams, $q, $log) {\n        if ($stateParams) {\n            if ($stateParams.createNew !== 'true') {\n                var gesuchIdParam = $stateParams.gesuchId;\n                if (!gesuchIdParam) {\n                    $log.error('opened fallCreation without gesuchId parameter in edit mode', $stateParams);\n                }\n                berechnungsManager.clear();\n                return gesuchModelManager.openGesuch(gesuchIdParam);\n            }\n            else {\n                var eingangsart = $stateParams.eingangsart;\n                var gesuchsperiodeId = $stateParams.gesuchsperiodeId;\n                var fallId = $stateParams.fallId;\n                //initialize gesuch\n                return gesuchModelManager.initGesuchWithEingangsart(true, eingangsart, gesuchsperiodeId, fallId);\n            }\n        }\n        $log.warn('no state params available fo page fallCreation, this is probably a bug');\n        return $q.defer(gesuchModelManager.getGesuch());\n    }\n    exports.reloadGesuchModelManager = reloadGesuchModelManager;\n    getKinderDubletten.$inject = ['$stateParams', '$q', '$log', 'KindRS', 'AuthServiceRS'];\n    /* @ngInject */\n    // Die Kinderdubletten werden nur f√ºr JA-Mitarbeiter (inkl. Revisor und Jurist) angezeigt\n    function getKinderDubletten($stateParams, $q, $log, KindRS, authService) {\n        var isAdmin = authService.isOneOfRoles(TSRoleUtil_1.TSRoleUtil.getJugendamtRole());\n        if (isAdmin && $stateParams && $stateParams.gesuchId) {\n            var gesuchIdParam = $stateParams.gesuchId;\n            return KindRS.getKindDubletten(gesuchIdParam);\n        }\n        var deferred = $q.defer();\n        deferred.resolve(undefined);\n        return deferred.promise;\n    }\n    exports.getKinderDubletten = getKinderDubletten;\n    createEmptyMutation.$inject = ['GesuchModelManager', '$stateParams', '$q'];\n    function createEmptyMutation(gesuchModelManager, $stateParams, $q) {\n        if ($stateParams) {\n            var gesuchId = $stateParams.gesuchId;\n            var eingangsart = $stateParams.eingangsart;\n            var gesuchsperiodeId = $stateParams.gesuchsperiodeId;\n            var fallId = $stateParams.fallId;\n            if (gesuchId && eingangsart) {\n                gesuchModelManager.initMutation(gesuchId, eingangsart, gesuchsperiodeId, fallId);\n            }\n        }\n        return $q.defer(gesuchModelManager.getGesuch());\n    }\n    exports.createEmptyMutation = createEmptyMutation;\n    createEmptyErneuerungsgesuch.$inject = ['GesuchModelManager', '$stateParams', '$q'];\n    function createEmptyErneuerungsgesuch(gesuchModelManager, $stateParams, $q) {\n        if ($stateParams) {\n            var gesuchId = $stateParams.gesuchId;\n            var eingangsart = $stateParams.eingangsart;\n            var gesuchsperiodeId = $stateParams.gesuchsperiodeId;\n            var fallId = $stateParams.fallId;\n            if (gesuchId && eingangsart) {\n                gesuchModelManager.initErneuerungsgesuch(gesuchId, eingangsart, gesuchsperiodeId, fallId);\n            }\n        }\n        return $q.defer(gesuchModelManager.getGesuch());\n    }\n    exports.createEmptyErneuerungsgesuch = createEmptyErneuerungsgesuch;\n});\n",{"version":3,"file":"/home/imanol/projects/ebegu/ebegu-web/src/gesuch/gesuch.route.ts","sourceRoot":"","sources":["/home/imanol/projects/ebegu/ebegu-web/src/gesuch/gesuch.route.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Ki-Tax: System for the management of external childcare subsidies\n * Copyright (C) 2017 City of Bern Switzerland\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport {RouterHelper} from '../dvbModules/router/route-helper-provider';\nimport {IState, IStateParamsService} from 'angular-ui-router';\nimport {GesuchRouteController} from './gesuch';\nimport GesuchModelManager from './service/gesuchModelManager';\nimport TSGesuch from '../models/TSGesuch';\nimport BerechnungsManager from './service/berechnungsManager';\nimport WizardStepManager from './service/wizardStepManager';\nimport MahnungRS from './service/mahnungRS.rest';\nimport {TSEingangsart} from '../models/enums/TSEingangsart';\nimport KindRS from '../core/service/kindRS.rest';\nimport AuthServiceRS from '../authentication/service/AuthServiceRS.rest';\nimport {TSRoleUtil} from '../utils/TSRoleUtil';\nimport TSMahnung from '../models/TSMahnung';\nimport TSKindDublette from '../models/TSKindDublette';\nimport IPromise = angular.IPromise;\nimport IQService = angular.IQService;\nimport ILogService = angular.ILogService;\n\nlet gesuchTpl = require('./gesuch.html');\n\ngesuchRun.$inject = ['RouterHelper'];\n\n/* @ngInject */\nexport function gesuchRun(routerHelper: RouterHelper) {\n    routerHelper.configureStates(getStates(), '/start');\n}\n\n//array mit allen States\nfunction getStates(): IState[] {\n    return [\n        new EbeguGesuchState(),\n        new EbeguFamiliensituationState(),\n        new EbeguStammdatenState(),\n        new EbeguUmzugState(),\n        new EbeguKinderListState(),\n        new EbeguFinanzielleSituationStartState(),\n        new EbeguFinanzielleSituationState(),\n        new EbeguFinanzielleSituationResultateState(),\n        new EbeguKindState(),\n        new EbeguErwerbspensenListState(),\n        new EbeguErwerbspensumState(),\n        new EbeguBetreuungListState(),\n        new EbeguBetreuungState(),\n        new EbeguAbwesenheitState(),\n        new EbeguNewFallState(),\n        new EbeguMutationState(),\n        new EbeguErneuerungsgesuchState(),\n        new EbeguVerfuegenListState(),\n        new EbeguVerfuegenState(),\n        new EbeguEinkommensverschlechterungInfoState(),\n        new EbeguEinkommensverschlechterungSteuernState(),\n        new EbeguEinkommensverschlechterungState(),\n        new EbeguEinkommensverschlechterungResultateState(),\n        new EbeguDokumenteState(),\n        new EbeguFreigabeState(),\n        new EbeguBetreuungMitteilungState()\n    ];\n}\n\n//STATES\n\nexport class EbeguGesuchState implements IState {\n    name = 'gesuch';\n    template = gesuchTpl;\n    url = '/gesuch';\n    abstract = true;\n    controller = GesuchRouteController;\n    controllerAs = 'vm';\n}\n\nexport class EbeguNewFallState implements IState {\n    name = 'gesuch.fallcreation';\n    url = '/fall/:createNew/:eingangsart/:gesuchsperiodeId/:gesuchId/:fallId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<fall-creation-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: reloadGesuchModelManager\n    };\n}\n\nexport class EbeguMutationState implements IState {\n    name = 'gesuch.mutation';\n    url = '/mutation/:createMutation/:eingangsart/:gesuchsperiodeId/:gesuchId/:fallId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<fall-creation-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: createEmptyMutation\n    };\n}\n\nexport class EbeguErneuerungsgesuchState implements IState {\n    name = 'gesuch.erneuerung';\n    url = '/erneuerung/:createErneuerung/:eingangsart/:gesuchsperiodeId/:gesuchId/:fallId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<fall-creation-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: createEmptyErneuerungsgesuch\n    };\n}\n\nexport class EbeguFamiliensituationState implements IState {\n    name = 'gesuch.familiensituation';\n    url = '/familiensituation/:gesuchId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<familiensituation-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguStammdatenState implements IState {\n    name = 'gesuch.stammdaten';\n    url = '/stammdaten/:gesuchId/:gesuchstellerNumber';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<stammdaten-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguUmzugState implements IState {\n    name = 'gesuch.umzug';\n    url = '/umzug/:gesuchId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<umzug-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguKinderListState implements IState {\n    name = 'gesuch.kinder';\n    url = '/kinder/:gesuchId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<kinder-list-view kinder-dubletten=\"$resolve.kinderDubletten\">'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager,\n        kinderDubletten: getKinderDubletten\n    };\n}\n\nexport class EbeguKindState implements IState {\n    name = 'gesuch.kind';\n    url = '/kinder/kind/:gesuchId/:kindNumber';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<kind-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguBetreuungListState implements IState {\n    name = 'gesuch.betreuungen';\n    url = '/betreuungen/:gesuchId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<betreuung-list-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguBetreuungState implements IState {\n    name = 'gesuch.betreuung';\n    url = '/betreuungen/betreuung/:gesuchId/:kindNumber/:betreuungNumber';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<betreuung-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguAbwesenheitState implements IState {\n    name = 'gesuch.abwesenheit';\n    url = '/abwesenheit/:gesuchId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<abwesenheit-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguErwerbspensenListState implements IState {\n    name = 'gesuch.erwerbsPensen';\n    url = '/erwerbspensen/:gesuchId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<erwerbspensum-list-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguErwerbspensumState implements IState {\n    name = 'gesuch.erwerbsPensum';\n    url = '/erwerbspensen/erwerbspensum/:gesuchId/:gesuchstellerNumber/:erwerbspensumNum';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<erwerbspensum-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguFinanzielleSituationState implements IState {\n    name = 'gesuch.finanzielleSituation';\n    url = '/finanzielleSituation/:gesuchId/:gesuchstellerNumber';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<finanzielle-situation-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguFinanzielleSituationStartState implements IState {\n    name = 'gesuch.finanzielleSituationStart';\n    url = '/finanzielleSituationStart/:gesuchId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<finanzielle-situation-start-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguFinanzielleSituationResultateState implements IState {\n    name = 'gesuch.finanzielleSituationResultate';\n    url = '/finanzielleSituationResultate/:gesuchId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<finanzielle-situation-resultate-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguVerfuegenListState implements IState {\n    name = 'gesuch.verfuegen';\n    url = '/verfuegen/:gesuchId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<verfuegen-list-view mahnung-list=\"$resolve.mahnungList\">'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager,\n        mahnungList: getMahnungen\n    };\n}\n\nexport class EbeguVerfuegenState implements IState {\n    name = 'gesuch.verfuegenView';\n    url = '/verfuegenView/:gesuchId/:betreuungNumber/:kindNumber';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<verfuegen-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguEinkommensverschlechterungInfoState implements IState {\n    name = 'gesuch.einkommensverschlechterungInfo';\n    url = '/einkommensverschlechterungInfo/:gesuchId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<einkommensverschlechterung-info-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguEinkommensverschlechterungSteuernState implements IState {\n    name = 'gesuch.einkommensverschlechterungSteuern';\n    url = '/einkommensverschlechterungSteuern/:gesuchId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<einkommensverschlechterung-steuern-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguEinkommensverschlechterungState implements IState {\n    name = 'gesuch.einkommensverschlechterung';\n    url = '/einkommensverschlechterung/:gesuchId/:gesuchstellerNumber/:basisjahrPlus';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<einkommensverschlechterung-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguEinkommensverschlechterungResultateState implements IState {\n    name = 'gesuch.einkommensverschlechterungResultate';\n    url = '/einkommensverschlechterungResultate/:gesuchId/:basisjahrPlus';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<einkommensverschlechterung-resultate-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguDokumenteState implements IState {\n    name = 'gesuch.dokumente';\n    url = '/dokumente/:gesuchId/:gesuchstellerNumber';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<dokumente-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguFreigabeState implements IState {\n    name = 'gesuch.freigabe';\n    url = '/freigabe/:gesuchId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<freigabe-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\nexport class EbeguBetreuungMitteilungState implements IState {\n    name = 'gesuch.mitteilung';\n    url = '/mitteilung/:fallId/:gesuchId/:betreuungId/:mitteilungId';\n\n    views: { [name: string]: IState } = {\n        'gesuchViewPort': {\n            template: '<betreuung-mitteilung-view>'\n        },\n        'kommentarViewPort': {\n            template: '<kommentar-view>'\n        }\n    };\n\n    resolve = {\n        gesuch: getGesuchModelManager\n    };\n}\n\n//PARAMS\n\nexport class IGesuchStateParams implements IStateParamsService {\n    gesuchId: string;\n}\n\nexport class IStammdatenStateParams implements IStateParamsService {\n    gesuchstellerNumber: string;\n}\n\nexport class IKindStateParams implements IStateParamsService {\n    kindNumber: string;\n}\n\nexport class IBetreuungStateParams implements IStateParamsService {\n    betreuungNumber: string;\n    kindNumber: string;\n}\n\nexport class INewFallStateParams implements IStateParamsService {\n    createNew: string;\n    createMutation: string;\n    eingangsart: TSEingangsart;\n    gesuchsperiodeId: string;\n    gesuchId: string;\n    fallId: string;\n}\n\nexport class IErwerbspensumStateParams implements IStateParamsService {\n    gesuchstellerNumber: string;\n    erwerbspensumNum: string;\n}\n\nexport class IEinkommensverschlechterungStateParams implements IStateParamsService {\n    gesuchstellerNumber: string;\n    basisjahrPlus: string;\n}\n\nexport class IEinkommensverschlechterungResultateStateParams implements IStateParamsService {\n    basisjahrPlus: string;\n}\n\n// FIXME dieses $inject wird ignoriert, d.h, der Parameter der Funktion muss exact dem Namen des Services entsprechen (Grossbuchstaben am Anfang). Warum?\ngetMahnungen.$inject = ['MahnungRS', '$stateParams', '$q', '$log'];\n\n/* @ngInject */\nexport function getMahnungen(MahnungRS: MahnungRS, $stateParams: IGesuchStateParams, $q: IQService, $log: ILogService) {\n    // return [];\n    if ($stateParams) {\n        let gesuchIdParam = $stateParams.gesuchId;\n        if (gesuchIdParam) {\n            return MahnungRS.findMahnungen(gesuchIdParam);\n        }\n    }\n    $log.warn('keine stateParams oder keine gesuchId, gebe undefined zurueck');\n    let deferred = $q.defer<TSMahnung[]>();\n    deferred.resolve(undefined);\n    return deferred.promise;\n}\n\ngetGesuchModelManager.$inject = ['GesuchModelManager', 'BerechnungsManager', 'WizardStepManager', '$stateParams', '$q', '$log'];\n\n/* @ngInject */\nexport function getGesuchModelManager(gesuchModelManager: GesuchModelManager, berechnungsManager: BerechnungsManager,\n                                      wizardStepManager: WizardStepManager, $stateParams: IGesuchStateParams, $q: IQService,\n                                      $log: ILogService): IPromise<TSGesuch> {\n    if ($stateParams) {\n        let gesuchIdParam = $stateParams.gesuchId;\n        if (gesuchIdParam) {\n            if (!gesuchModelManager.getGesuch() || gesuchModelManager.getGesuch() && gesuchModelManager.getGesuch().id !== gesuchIdParam\n                || gesuchModelManager.getGesuch().emptyCopy) {\n                // Wenn die antrags id im GescuchModelManager nicht mit der GesuchId ueberreinstimmt wird das gesuch neu geladen\n                // Ebenfalls soll das Gesuch immer neu geladen werden, wenn es sich beim Gesuch im Gesuchmodelmanager um eine leere Mutation handelt\n                // oder um ein leeres Erneuerungsgesuch\n                berechnungsManager.clear();\n                return gesuchModelManager.openGesuch(gesuchIdParam);\n            } else {\n                let deferred = $q.defer<TSGesuch>();\n                deferred.resolve(gesuchModelManager.getGesuch());\n                return deferred.promise;\n            }\n\n        }\n    }\n    $log.warn('keine stateParams oder keine gesuchId, gebe undefined zurueck');\n    let deferred = $q.defer<TSGesuch>();\n    deferred.resolve(undefined);\n    return deferred.promise;\n}\n\nreloadGesuchModelManager.$inject = ['GesuchModelManager', 'BerechnungsManager', 'WizardStepManager', '$stateParams', '$q', '$log'];\n\n/* @ngInject */\nexport function reloadGesuchModelManager(gesuchModelManager: GesuchModelManager, berechnungsManager: BerechnungsManager,\n                                         wizardStepManager: WizardStepManager, $stateParams: INewFallStateParams, $q: any,\n                                         $log: ILogService): IPromise<TSGesuch> {\n    if ($stateParams) {\n        if ($stateParams.createNew !== 'true') {\n            let gesuchIdParam = $stateParams.gesuchId;\n            if (!gesuchIdParam) {\n                $log.error('opened fallCreation without gesuchId parameter in edit mode', $stateParams);\n            }\n            berechnungsManager.clear();\n            return gesuchModelManager.openGesuch(gesuchIdParam);\n        } else {\n            let eingangsart = $stateParams.eingangsart;\n            let gesuchsperiodeId = $stateParams.gesuchsperiodeId;\n            let fallId = $stateParams.fallId;\n            //initialize gesuch\n            return gesuchModelManager.initGesuchWithEingangsart(true, eingangsart, gesuchsperiodeId, fallId);\n        }\n    }\n    $log.warn('no state params available fo page fallCreation, this is probably a bug');\n    return $q.defer(gesuchModelManager.getGesuch());\n}\n\ngetKinderDubletten.$inject = ['$stateParams', '$q', '$log', 'KindRS', 'AuthServiceRS'];\n/* @ngInject */\n\n// Die Kinderdubletten werden nur f√ºr JA-Mitarbeiter (inkl. Revisor und Jurist) angezeigt\nexport function getKinderDubletten($stateParams: IGesuchStateParams, $q: IQService, $log: ILogService, KindRS: KindRS, authService: AuthServiceRS) {\n    let isAdmin: boolean = authService.isOneOfRoles(TSRoleUtil.getJugendamtRole());\n    if (isAdmin && $stateParams && $stateParams.gesuchId) {\n        let gesuchIdParam = $stateParams.gesuchId;\n        return KindRS.getKindDubletten(gesuchIdParam);\n    }\n    let deferred = $q.defer<TSKindDublette[]>();\n    deferred.resolve(undefined);\n    return deferred.promise;\n}\n\ncreateEmptyMutation.$inject = ['GesuchModelManager', '$stateParams', '$q'];\n\nexport function createEmptyMutation(gesuchModelManager: GesuchModelManager, $stateParams: INewFallStateParams, $q: any): IPromise<TSGesuch> {\n    if ($stateParams) {\n        let gesuchId = $stateParams.gesuchId;\n        let eingangsart = $stateParams.eingangsart;\n        let gesuchsperiodeId = $stateParams.gesuchsperiodeId;\n        let fallId = $stateParams.fallId;\n        if (gesuchId && eingangsart) {\n            gesuchModelManager.initMutation(gesuchId, eingangsart, gesuchsperiodeId, fallId);\n        }\n    }\n    return $q.defer(gesuchModelManager.getGesuch());\n}\n\ncreateEmptyErneuerungsgesuch.$inject = ['GesuchModelManager', '$stateParams', '$q'];\n\nexport function createEmptyErneuerungsgesuch(gesuchModelManager: GesuchModelManager, $stateParams: INewFallStateParams, $q: any): IPromise<TSGesuch> {\n    if ($stateParams) {\n        let gesuchId = $stateParams.gesuchId;\n        let eingangsart = $stateParams.eingangsart;\n        let gesuchsperiodeId = $stateParams.gesuchsperiodeId;\n        let fallId = $stateParams.fallId;\n        if (gesuchId && eingangsart) {\n            gesuchModelManager.initErneuerungsgesuch(gesuchId, eingangsart, gesuchsperiodeId, fallId);\n        }\n    }\n    return $q.defer(gesuchModelManager.getGesuch());\n}\n"]}]}