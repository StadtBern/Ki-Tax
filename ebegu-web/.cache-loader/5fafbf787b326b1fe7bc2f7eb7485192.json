{"remainingRequest":"/home/imanol/projects/ebegu/ebegu-web/node_modules/thread-loader/dist/cjs.js??ref--0-1!/home/imanol/projects/ebegu/ebegu-web/node_modules/ts-loader/index.js??ref--0-2!/home/imanol/projects/ebegu/ebegu-web/src/models/TSGesuch.ts","cacheIdentifier":"cache-loader:1.1.0 test","dependencies":[{"path":"/home/imanol/projects/ebegu/ebegu-web/src/models/TSGesuch.ts","mtime":1518535855232},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/cache-loader/dist/cjs.js","mtime":1507514019000},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/thread-loader/dist/cjs.js","mtime":1507523420000},{"path":"/home/imanol/projects/ebegu/ebegu-web/node_modules/ts-loader/index.js","mtime":1508488471000}],"contextDependencies":[],"result":["/*\n * Ki-Tax: System for the management of external childcare subsidies\n * Copyright (C) 2017 City of Bern Switzerland\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\ndefine([\"require\", \"exports\", \"./TSAbstractAntragEntity\", \"./enums/TSAntragTyp\", \"./enums/TSEingangsart\", \"./enums/TSBetreuungsangebotTyp\", \"./enums/TSBetreuungsstatus\", \"./enums/TSAntragStatus\"], function (require, exports, TSAbstractAntragEntity_1, TSAntragTyp_1, TSEingangsart_1, TSBetreuungsangebotTyp_1, TSBetreuungsstatus_1, TSAntragStatus_1) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    var TSGesuch = /** @class */ (function (_super) {\n        __extends(TSGesuch, _super);\n        function TSGesuch() {\n            var _this = _super !== null && _super.apply(this, arguments) || this;\n            _this._geprueftSTV = false;\n            _this._hasFSDokument = true;\n            _this._gesperrtWegenBeschwerde = false;\n            _this._dokumenteHochgeladen = false;\n            // Wir m端ssen uns merken, dass dies nicht das originalGesuch ist sondern eine Mutations- oder Erneuerungskopie\n            // (Wichtig f端r laden des Gesuchs bei Navigation)\n            _this._emptyCopy = false;\n            return _this;\n        }\n        Object.defineProperty(TSGesuch.prototype, \"gesuchsteller1\", {\n            get: function () {\n                return this._gesuchsteller1;\n            },\n            set: function (value) {\n                this._gesuchsteller1 = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TSGesuch.prototype, \"gesuchsteller2\", {\n            get: function () {\n                return this._gesuchsteller2;\n            },\n            set: function (value) {\n                this._gesuchsteller2 = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TSGesuch.prototype, \"kindContainers\", {\n            get: function () {\n                return this._kindContainers;\n            },\n            set: function (value) {\n                this._kindContainers = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TSGesuch.prototype, \"familiensituationContainer\", {\n            get: function () {\n                return this._familiensituationContainer;\n            },\n            set: function (value) {\n                this._familiensituationContainer = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TSGesuch.prototype, \"einkommensverschlechterungInfoContainer\", {\n            get: function () {\n                return this._einkommensverschlechterungInfoContainer;\n            },\n            set: function (value) {\n                this._einkommensverschlechterungInfoContainer = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TSGesuch.prototype, \"bemerkungen\", {\n            get: function () {\n                return this._bemerkungen;\n            },\n            set: function (value) {\n                this._bemerkungen = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TSGesuch.prototype, \"bemerkungenSTV\", {\n            get: function () {\n                return this._bemerkungenSTV;\n            },\n            set: function (value) {\n                this._bemerkungenSTV = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TSGesuch.prototype, \"bemerkungenPruefungSTV\", {\n            get: function () {\n                return this._bemerkungenPruefungSTV;\n            },\n            set: function (value) {\n                this._bemerkungenPruefungSTV = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TSGesuch.prototype, \"laufnummer\", {\n            get: function () {\n                return this._laufnummer;\n            },\n            set: function (value) {\n                this._laufnummer = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TSGesuch.prototype, \"geprueftSTV\", {\n            get: function () {\n                return this._geprueftSTV;\n            },\n            set: function (value) {\n                this._geprueftSTV = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TSGesuch.prototype, \"hasFSDokument\", {\n            get: function () {\n                return this._hasFSDokument;\n            },\n            set: function (value) {\n                this._hasFSDokument = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TSGesuch.prototype, \"gesperrtWegenBeschwerde\", {\n            get: function () {\n                return this._gesperrtWegenBeschwerde;\n            },\n            set: function (value) {\n                this._gesperrtWegenBeschwerde = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TSGesuch.prototype, \"emptyCopy\", {\n            get: function () {\n                return this._emptyCopy;\n            },\n            set: function (value) {\n                this._emptyCopy = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TSGesuch.prototype, \"datumGewarntNichtFreigegeben\", {\n            get: function () {\n                return this._datumGewarntNichtFreigegeben;\n            },\n            set: function (value) {\n                this._datumGewarntNichtFreigegeben = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TSGesuch.prototype, \"datumGewarntFehlendeQuittung\", {\n            get: function () {\n                return this._datumGewarntFehlendeQuittung;\n            },\n            set: function (value) {\n                this._datumGewarntFehlendeQuittung = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TSGesuch.prototype, \"timestampVerfuegt\", {\n            get: function () {\n                return this._timestampVerfuegt;\n            },\n            set: function (value) {\n                this._timestampVerfuegt = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TSGesuch.prototype, \"gueltig\", {\n            get: function () {\n                return this._gueltig;\n            },\n            set: function (value) {\n                this._gueltig = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TSGesuch.prototype, \"gesuchBetreuungenStatus\", {\n            get: function () {\n                return this._gesuchBetreuungenStatus;\n            },\n            set: function (value) {\n                this._gesuchBetreuungenStatus = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TSGesuch.prototype, \"dokumenteHochgeladen\", {\n            get: function () {\n                return this._dokumenteHochgeladen;\n            },\n            set: function (value) {\n                this._dokumenteHochgeladen = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        TSGesuch.prototype.isMutation = function () {\n            return this.typ === TSAntragTyp_1.TSAntragTyp.MUTATION;\n        };\n        TSGesuch.prototype.isFolgegesuch = function () {\n            return this.typ === TSAntragTyp_1.TSAntragTyp.ERNEUERUNGSGESUCH;\n        };\n        TSGesuch.prototype.isOnlineGesuch = function () {\n            return TSEingangsart_1.TSEingangsart.ONLINE === this.eingangsart;\n        };\n        /**\n         * Schaut ob der GS1 oder der GS2 mindestens eine umzugsadresse hat\n         */\n        TSGesuch.prototype.isThereAnyUmzug = function () {\n            if (this.gesuchsteller1 && this.gesuchsteller1.getUmzugAdressen().length > 0) {\n                return true;\n            }\n            if (this.gesuchsteller2 && this.gesuchsteller2.getUmzugAdressen().length > 0) {\n                return true;\n            }\n            return false;\n        };\n        /**\n         *\n         * @returns {any} Alle KindContainer in denen das Kind Betreuung benoetigt\n         */\n        TSGesuch.prototype.getKinderWithBetreuungList = function () {\n            var listResult = [];\n            if (this.kindContainers) {\n                this.kindContainers.forEach(function (kind) {\n                    if (kind.kindJA.familienErgaenzendeBetreuung) {\n                        listResult.push(kind);\n                    }\n                });\n            }\n            return listResult;\n        };\n        /**\n         * Returns true when all Betreuungen are of kind SCHULAMT.\n         * Returns false also if there are no Kinder with betreuungsbedarf\n         */\n        TSGesuch.prototype.areThereOnlySchulamtAngebote = function () {\n            var kinderWithBetreuungList = this.getKinderWithBetreuungList();\n            if (kinderWithBetreuungList.length <= 0) {\n                return false; // no Kind with bedarf\n            }\n            for (var _i = 0, kinderWithBetreuungList_1 = kinderWithBetreuungList; _i < kinderWithBetreuungList_1.length; _i++) {\n                var kind = kinderWithBetreuungList_1[_i];\n                for (var _a = 0, _b = kind.betreuungen; _a < _b.length; _a++) {\n                    var betreuung = _b[_a];\n                    if (!TSBetreuungsangebotTyp_1.isSchulamt(betreuung.institutionStammdaten.betreuungsangebotTyp)) {\n                        return false;\n                    }\n                }\n            }\n            return true;\n        };\n        /**\n         * Returns true when all Betreuungen are geschlossen ohne verfuegung\n         */\n        TSGesuch.prototype.areThereOnlyGeschlossenOhneVerfuegung = function () {\n            var kinderWithBetreuungList = this.getKinderWithBetreuungList();\n            if (kinderWithBetreuungList.length <= 0) {\n                return false; // no Kind with bedarf\n            }\n            for (var _i = 0, kinderWithBetreuungList_2 = kinderWithBetreuungList; _i < kinderWithBetreuungList_2.length; _i++) {\n                var kind = kinderWithBetreuungList_2[_i];\n                for (var _a = 0, _b = kind.betreuungen; _a < _b.length; _a++) {\n                    var betreuung = _b[_a];\n                    if (betreuung.betreuungsstatus !== TSBetreuungsstatus_1.TSBetreuungsstatus.GESCHLOSSEN_OHNE_VERFUEGUNG) {\n                        return false;\n                    }\n                }\n            }\n            return true;\n        };\n        TSGesuch.prototype.hasBetreuungInStatusWarten = function () {\n            var kinderWithBetreuungList = this.getKinderWithBetreuungList();\n            for (var _i = 0, kinderWithBetreuungList_3 = kinderWithBetreuungList; _i < kinderWithBetreuungList_3.length; _i++) {\n                var kind = kinderWithBetreuungList_3[_i];\n                for (var _a = 0, _b = kind.betreuungen; _a < _b.length; _a++) {\n                    var betreuung = _b[_a];\n                    if (betreuung.betreuungsstatus === TSBetreuungsstatus_1.TSBetreuungsstatus.WARTEN) {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        };\n        TSGesuch.prototype.extractFamiliensituation = function () {\n            if (this.familiensituationContainer) {\n                return this.familiensituationContainer.familiensituationJA;\n            }\n            return undefined;\n        };\n        TSGesuch.prototype.extractFamiliensituationErstgesuch = function () {\n            if (this.familiensituationContainer) {\n                return this.familiensituationContainer.familiensituationErstgesuch;\n            }\n            return undefined;\n        };\n        TSGesuch.prototype.extractEinkommensverschlechterungInfo = function () {\n            if (this.einkommensverschlechterungInfoContainer) {\n                return this.einkommensverschlechterungInfoContainer.einkommensverschlechterungInfoJA;\n            }\n            return undefined;\n        };\n        TSGesuch.prototype.canBeFreigegeben = function () {\n            return this.status === TSAntragStatus_1.TSAntragStatus.FREIGABEQUITTUNG;\n        };\n        /**\n         * Schaut dass mindestens eine Betreuung erfasst wurde.\n         * @returns {boolean}\n         */\n        TSGesuch.prototype.isThereAnyBetreuung = function () {\n            var kinderWithBetreuungList = this.getKinderWithBetreuungList();\n            for (var _i = 0, kinderWithBetreuungList_4 = kinderWithBetreuungList; _i < kinderWithBetreuungList_4.length; _i++) {\n                var kind = kinderWithBetreuungList_4[_i];\n                if (kind.betreuungen && kind.betreuungen.length > 0) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        TSGesuch.prototype.extractKindFromKindNumber = function (kindNumber) {\n            if (this.kindContainers && kindNumber > 0) {\n                for (var i = 0; i < this.kindContainers.length; i++) {\n                    if (this.kindContainers[i].kindNummer === kindNumber) {\n                        return this.kindContainers[i];\n                    }\n                }\n            }\n            return undefined;\n        };\n        return TSGesuch;\n    }(TSAbstractAntragEntity_1.default));\n    exports.default = TSGesuch;\n});\n",{"version":3,"file":"/home/imanol/projects/ebegu/ebegu-web/src/models/TSGesuch.ts","sourceRoot":"","sources":["/home/imanol/projects/ebegu/ebegu-web/src/models/TSGesuch.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Ki-Tax: System for the management of external childcare subsidies\n * Copyright (C) 2017 City of Bern Switzerland\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport TSKindContainer from './TSKindContainer';\nimport TSAbstractAntragEntity from './TSAbstractAntragEntity';\nimport TSFamiliensituation from './TSFamiliensituation';\nimport TSEinkommensverschlechterungInfo from './TSEinkommensverschlechterungInfo';\nimport {TSAntragTyp} from './enums/TSAntragTyp';\nimport TSGesuchstellerContainer from './TSGesuchstellerContainer';\nimport TSEinkommensverschlechterungInfoContainer from './TSEinkommensverschlechterungInfoContainer';\nimport TSFamiliensituationContainer from './TSFamiliensituationContainer';\nimport {TSEingangsart} from './enums/TSEingangsart';\nimport {isSchulamt} from './enums/TSBetreuungsangebotTyp';\nimport {TSBetreuungsstatus} from './enums/TSBetreuungsstatus';\nimport {TSAntragStatus} from './enums/TSAntragStatus';\nimport * as moment from 'moment';\nimport {TSGesuchBetreuungenStatus} from './enums/TSGesuchBetreuungenStatus';\n\nexport default class TSGesuch extends TSAbstractAntragEntity {\n\n    private _gesuchsteller1: TSGesuchstellerContainer;\n    private _gesuchsteller2: TSGesuchstellerContainer;\n    private _kindContainers: Array<TSKindContainer>;\n    private _familiensituationContainer: TSFamiliensituationContainer;\n    private _einkommensverschlechterungInfoContainer: TSEinkommensverschlechterungInfoContainer;\n    private _bemerkungen: string;\n    private _bemerkungenSTV: string;\n    private _bemerkungenPruefungSTV: string;\n    private _laufnummer: number;\n    private _geprueftSTV: boolean = false;\n    private _hasFSDokument: boolean = true;\n    private _gesperrtWegenBeschwerde: boolean = false;\n    private _datumGewarntNichtFreigegeben: moment.Moment;\n    private _datumGewarntFehlendeQuittung: moment.Moment;\n    private _gesuchBetreuungenStatus: TSGesuchBetreuungenStatus;\n    private _dokumenteHochgeladen: boolean = false;\n\n    private _timestampVerfuegt: moment.Moment;\n    private _gueltig: boolean;\n\n    // Wir m端ssen uns merken, dass dies nicht das originalGesuch ist sondern eine Mutations- oder Erneuerungskopie\n    // (Wichtig f端r laden des Gesuchs bei Navigation)\n    private _emptyCopy: boolean = false;\n\n    public get gesuchsteller1(): TSGesuchstellerContainer {\n        return this._gesuchsteller1;\n    }\n\n    public set gesuchsteller1(value: TSGesuchstellerContainer) {\n        this._gesuchsteller1 = value;\n    }\n\n    public get gesuchsteller2(): TSGesuchstellerContainer {\n        return this._gesuchsteller2;\n    }\n\n    public set gesuchsteller2(value: TSGesuchstellerContainer) {\n        this._gesuchsteller2 = value;\n    }\n\n    get kindContainers(): Array<TSKindContainer> {\n        return this._kindContainers;\n    }\n\n    set kindContainers(value: Array<TSKindContainer>) {\n        this._kindContainers = value;\n    }\n\n    get familiensituationContainer(): TSFamiliensituationContainer {\n        return this._familiensituationContainer;\n    }\n\n    set familiensituationContainer(value: TSFamiliensituationContainer) {\n        this._familiensituationContainer = value;\n    }\n\n    get einkommensverschlechterungInfoContainer(): TSEinkommensverschlechterungInfoContainer {\n        return this._einkommensverschlechterungInfoContainer;\n    }\n\n    set einkommensverschlechterungInfoContainer(value: TSEinkommensverschlechterungInfoContainer) {\n        this._einkommensverschlechterungInfoContainer = value;\n    }\n\n    get bemerkungen(): string {\n        return this._bemerkungen;\n    }\n\n    set bemerkungen(value: string) {\n        this._bemerkungen = value;\n    }\n\n    get bemerkungenSTV(): string {\n        return this._bemerkungenSTV;\n    }\n\n    set bemerkungenSTV(value: string) {\n        this._bemerkungenSTV = value;\n    }\n\n    get bemerkungenPruefungSTV(): string {\n        return this._bemerkungenPruefungSTV;\n    }\n\n    set bemerkungenPruefungSTV(value: string) {\n        this._bemerkungenPruefungSTV = value;\n    }\n\n    get laufnummer(): number {\n        return this._laufnummer;\n    }\n\n    set laufnummer(value: number) {\n        this._laufnummer = value;\n    }\n\n    get geprueftSTV(): boolean {\n        return this._geprueftSTV;\n    }\n\n    set geprueftSTV(value: boolean) {\n        this._geprueftSTV = value;\n    }\n\n    get hasFSDokument(): boolean {\n        return this._hasFSDokument;\n    }\n\n    set hasFSDokument(value: boolean) {\n        this._hasFSDokument = value;\n    }\n\n    get gesperrtWegenBeschwerde(): boolean {\n        return this._gesperrtWegenBeschwerde;\n    }\n\n    set gesperrtWegenBeschwerde(value: boolean) {\n        this._gesperrtWegenBeschwerde = value;\n    }\n\n    get emptyCopy(): boolean {\n        return this._emptyCopy;\n    }\n\n    set emptyCopy(value: boolean) {\n        this._emptyCopy = value;\n    }\n\n    get datumGewarntNichtFreigegeben(): moment.Moment {\n        return this._datumGewarntNichtFreigegeben;\n    }\n\n    set datumGewarntNichtFreigegeben(value: moment.Moment) {\n        this._datumGewarntNichtFreigegeben = value;\n    }\n\n    get datumGewarntFehlendeQuittung(): moment.Moment {\n        return this._datumGewarntFehlendeQuittung;\n    }\n\n    set datumGewarntFehlendeQuittung(value: moment.Moment) {\n        this._datumGewarntFehlendeQuittung = value;\n    }\n\n    get timestampVerfuegt(): moment.Moment {\n        return this._timestampVerfuegt;\n    }\n\n    set timestampVerfuegt(value: moment.Moment) {\n        this._timestampVerfuegt = value;\n    }\n\n    get gueltig(): boolean {\n        return this._gueltig;\n    }\n\n    set gueltig(value: boolean) {\n        this._gueltig = value;\n    }\n\n    get gesuchBetreuungenStatus(): TSGesuchBetreuungenStatus {\n        return this._gesuchBetreuungenStatus;\n    }\n\n    set gesuchBetreuungenStatus(value: TSGesuchBetreuungenStatus) {\n        this._gesuchBetreuungenStatus = value;\n    }\n\n    get dokumenteHochgeladen(): boolean {\n        return this._dokumenteHochgeladen;\n    }\n\n    set dokumenteHochgeladen(value: boolean) {\n        this._dokumenteHochgeladen = value;\n    }\n\n    public isMutation(): boolean {\n        return this.typ === TSAntragTyp.MUTATION;\n    }\n\n    public isFolgegesuch(): boolean {\n        return this.typ === TSAntragTyp.ERNEUERUNGSGESUCH;\n    }\n\n    public isOnlineGesuch(): boolean {\n        return TSEingangsart.ONLINE === this.eingangsart;\n    }\n\n    /**\n     * Schaut ob der GS1 oder der GS2 mindestens eine umzugsadresse hat\n     */\n    public isThereAnyUmzug(): boolean {\n        if (this.gesuchsteller1 && this.gesuchsteller1.getUmzugAdressen().length > 0) {\n            return true;\n        }\n        if (this.gesuchsteller2 && this.gesuchsteller2.getUmzugAdressen().length > 0) {\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     *\n     * @returns {any} Alle KindContainer in denen das Kind Betreuung benoetigt\n     */\n    public getKinderWithBetreuungList(): Array<TSKindContainer> {\n        let listResult: Array<TSKindContainer> = [];\n        if (this.kindContainers) {\n            this.kindContainers.forEach((kind) => {\n                if (kind.kindJA.familienErgaenzendeBetreuung) {\n                    listResult.push(kind);\n                }\n            });\n        }\n        return listResult;\n    }\n\n    /**\n     * Returns true when all Betreuungen are of kind SCHULAMT.\n     * Returns false also if there are no Kinder with betreuungsbedarf\n     */\n    public areThereOnlySchulamtAngebote(): boolean {\n        let kinderWithBetreuungList: Array<TSKindContainer> = this.getKinderWithBetreuungList();\n        if (kinderWithBetreuungList.length <= 0) {\n            return false; // no Kind with bedarf\n        }\n        for (let kind of kinderWithBetreuungList) {\n            for (let betreuung of kind.betreuungen) {\n                if (!isSchulamt(betreuung.institutionStammdaten.betreuungsangebotTyp)) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n\n    /**\n     * Returns true when all Betreuungen are geschlossen ohne verfuegung\n     */\n    public areThereOnlyGeschlossenOhneVerfuegung(): boolean {\n        let kinderWithBetreuungList: Array<TSKindContainer> = this.getKinderWithBetreuungList();\n        if (kinderWithBetreuungList.length <= 0) {\n            return false; // no Kind with bedarf\n        }\n        for (let kind of kinderWithBetreuungList) {\n            for (let betreuung of kind.betreuungen) {\n                if (betreuung.betreuungsstatus !== TSBetreuungsstatus.GESCHLOSSEN_OHNE_VERFUEGUNG) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n\n    public hasBetreuungInStatusWarten(): boolean {\n        let kinderWithBetreuungList: Array<TSKindContainer> = this.getKinderWithBetreuungList();\n        for (let kind of kinderWithBetreuungList) {\n            for (let betreuung of kind.betreuungen) {\n                if (betreuung.betreuungsstatus === TSBetreuungsstatus.WARTEN) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    public extractFamiliensituation(): TSFamiliensituation {\n        if (this.familiensituationContainer) {\n            return this.familiensituationContainer.familiensituationJA;\n        }\n        return undefined;\n    }\n\n    public extractFamiliensituationErstgesuch(): TSFamiliensituation {\n        if (this.familiensituationContainer) {\n            return this.familiensituationContainer.familiensituationErstgesuch;\n        }\n        return undefined;\n    }\n\n    public extractEinkommensverschlechterungInfo(): TSEinkommensverschlechterungInfo {\n        if (this.einkommensverschlechterungInfoContainer) {\n            return this.einkommensverschlechterungInfoContainer.einkommensverschlechterungInfoJA;\n        }\n        return undefined;\n    }\n\n    public canBeFreigegeben(): boolean {\n        return this.status === TSAntragStatus.FREIGABEQUITTUNG;\n    }\n\n    /**\n     * Schaut dass mindestens eine Betreuung erfasst wurde.\n     * @returns {boolean}\n     */\n    public isThereAnyBetreuung(): boolean {\n        let kinderWithBetreuungList: Array<TSKindContainer> = this.getKinderWithBetreuungList();\n        for (let kind of kinderWithBetreuungList) {\n            if (kind.betreuungen && kind.betreuungen.length > 0) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    public extractKindFromKindNumber(kindNumber: number): TSKindContainer {\n        if (this.kindContainers && kindNumber > 0) {\n            for (let i = 0; i < this.kindContainers.length; i++) {\n                if (this.kindContainers[i].kindNummer === kindNumber) {\n                    return this.kindContainers[i];\n                }\n            }\n        }\n        return undefined;\n    }\n}\n"]}]}